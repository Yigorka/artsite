<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Libre Vault</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header" role="banner">
    <div class="header-inner">
      <div class="lang-wrap">
        <button class="lang-toggle" id="lang-toggle" aria-label="Switch language" aria-pressed="false">
          <span class="opt en">En</span><span class="sep">/</span><span class="opt ua active">Ua</span>
        </button>
      </div>
      <div class="logo-container header-logo" aria-label="Libre Vault">
        <img src="photo/Group16.svg" alt="Libre Vault">
      </div>
      <button class="burger" id="burger-btn" aria-label="Меню" aria-expanded="false" aria-controls="burger-menu">
        <span></span><span></span><span></span>
      </button>
      <nav class="burger-menu" id="burger-menu" role="navigation">
        <button class="menu-item" data-target="#art" data-i18n="nav.art">Art</button>
        <button class="menu-item" data-target="#books" data-i18n="nav.books">Books</button>
        <button class="menu-item" data-target="#apps" data-i18n="nav.apps">Apps/Games</button>
      </nav>
    </div>
  </header>

  <button class="section-toggle active" data-target="#art" data-i18n="nav.art" aria-expanded="true">Art</button>
  <div id="art" class="section-panel open" style="max-height:none">
    <div class="gallery">
      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/CartinaA.png" alt="Картина 1">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.a.desc">В букві "А" є продовження</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.a.caption">"Аа" 2025</div>
      </div>

      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/lohopitek.png" alt="Картина 2">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.l.desc">еволюція</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.l.caption">"Лохопітек" 2025</div>
      </div>

      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/shliah.png" alt="Картина 3">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.path.desc">Шлях вверх</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.path.caption">"Шлях" 2025</div>
      </div>

      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/usmishka.png" alt="Картина 4">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.smile.desc">Більше посмішки</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.smile.caption">"Усмішка" 2025</div>
      </div>

      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/a.jpg" alt="Картина 5">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.corner.desc">Кожен може бути загнаним в куток як ця буква</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.corner.caption">"А в кутку" 2025</div>
      </div>

      <div class="item">
        <div class="card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/8.png" alt="Картина 6">
            </div>
            <div class="card-face card-back">
              <p data-i18n="art.items.eight.desc">8</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="art.items.eight.caption">"8" 2025</div>
      </div>
    </div>
  </div>

  <button class="section-toggle" data-target="#books" data-i18n="nav.books" aria-expanded="false">Books</button>
  <div id="books" class="section-panel">
    <div class="gallery">
      <div class="item">
        <div class="card book-card" onclick="this.classList.toggle('flipped')">
          <div class="card-inner">
            <div class="card-face card-front">
              <img src="photo/sto.jpg" alt="Book 1">
            </div>
            <div class="card-face card-back">
              <p data-i18n="books.items.sto.desc">Концептуальна книга з ідеєю</p>
            </div>
          </div>
        </div>
        <div class="caption" data-i18n="books.items.sto.caption">100(сто)</div>
      </div>
    </div>
  </div>

  <button class="section-toggle" data-target="#apps" data-i18n="nav.apps" aria-expanded="false">Apps/Games</button>
  <div id="apps" class="section-panel">
    <div class="gallery"></div>
  </div>

  <script>
    const DURATION = 400;
    const LAST_DELAY = 300;
    const BUFFER = 80;
    const toggles = document.querySelectorAll('.section-toggle');

    function openPanel(panel, btn) {
      btn.classList.add('active');
      btn.setAttribute('aria-expanded', 'true');
      panel.classList.add('open');
      panel.classList.remove('closing');
      panel.style.maxHeight = panel.scrollHeight + 'px';
      panel.addEventListener('transitionend', function once() {
        if (panel.classList.contains('open')) panel.style.maxHeight = 'none';
        panel.removeEventListener('transitionend', once);
      });
    }

    function closePanel(panel, btn) {
      btn.classList.remove('active');
      btn.setAttribute('aria-expanded', 'false');
      panel.classList.add('closing');
      panel.style.maxHeight = panel.scrollHeight + 'px';
      setTimeout(() => {
        panel.classList.remove('open');
        panel.classList.remove('closing');
        panel.style.maxHeight = '0px';
      }, DURATION + LAST_DELAY + BUFFER);
    }

    toggles.forEach(btn => {
      const panel = document.querySelector(btn.dataset.target);
      btn.addEventListener('click', () => {
        const isOpen = panel.classList.contains('open');
        if (isOpen) {
          closePanel(panel, btn);
        } else {
          openPanel(panel, btn);
          panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });

    const burgerBtn = document.getElementById('burger-btn');
    const burgerMenu = document.getElementById('burger-menu');

    function closeBurger() {
      burgerMenu.classList.remove('show');
      burgerBtn.classList.remove('open');
      burgerBtn.setAttribute('aria-expanded', 'false');
    }

    burgerBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      burgerMenu.classList.toggle('show');
      burgerBtn.classList.toggle('open');
      burgerBtn.setAttribute('aria-expanded', burgerBtn.classList.contains('open') ? 'true' : 'false');
    });

    document.addEventListener('click', (e) => {
      if (!burgerMenu.contains(e.target) && !burgerBtn.contains(e.target)) closeBurger();
    });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeBurger(); });

    burgerMenu.querySelectorAll('.menu-item').forEach(mi => {
      mi.addEventListener('click', () => {
        const targetSel = mi.getAttribute('data-target');
        const panel = document.querySelector(targetSel);
        const btn = document.querySelector(`.section-toggle[data-target="${targetSel}"]`);
        if (panel && btn) {
          const alreadyOpen = panel.classList.contains('open');
          if (!alreadyOpen) openPanel(panel, btn);
          closeBurger();
          panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
          closeBurger();
        }
      });
    });

    const i18n = {
      en: {
        nav: { art: 'Art', books: 'Books', apps: 'Apps/Games' },
        art: {
          items: {
            a: { caption: '"Aa" 2025', desc: 'There is a continuation in the letter "A".' },
            l: { caption: '"Lohopitek" 2025', desc: 'evolution' },
            path: { caption: '"Path" 2025', desc: 'Path up' },
            smile: { caption: '"Smile" 2025', desc: 'More smile' },
            corner: { caption: '"A in the corner" 2025', desc: 'Anyone can be cornered like this letter' },
            eight: { caption: '"8" 2025', desc: '8' }
          }
        },
        books: { items: { sto: { caption: '100 (one hundred)', desc: 'A conceptual book with an idea' } } }
      },
      uk: {
        nav: { art: 'Мистецтво', books: 'Книги', apps: 'Додатки/Ігри' },
        art: {
          items: {
            a: { caption: '"Аа" 2025', desc: 'В букві "А" є продовження' },
            l: { caption: '"Лохопітек" 2025', desc: 'еволюція' },
            path: { caption: '"Шлях" 2025', desc: 'Шлях вверх' },
            smile: { caption: '"Усмішка" 2025', desc: 'Більше посмішки' },
            corner: { caption: '"А в кутку" 2025', desc: 'Кожен може бути загнаним в куток як ця буква' },
            eight: { caption: '"8" 2025', desc: '8' }
          }
        },
        books: { items: { sto: { caption: '100(сто)', desc: 'Концептуальна книга з ідеєю' } } }
      }
    };

    function get(obj, path) {
      return path.split('.').reduce((o, k) => o && o[k], obj) ?? '';
    }

    function applyI18n(lang) {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const val = get(i18n[lang], key);
        if (typeof val === 'string' && val.length) el.textContent = val;
      });
      document.documentElement.setAttribute('lang', lang);
    }

    const langToggle = document.getElementById('lang-toggle');
    function setLang(lang) {
      localStorage.setItem('site_lang', lang);
      applyI18n(lang);
      langToggle.querySelector('.opt.ua').classList.toggle('active', lang === 'uk');
      langToggle.querySelector('.opt.en').classList.toggle('active', lang === 'en');
    }
    langToggle.addEventListener('click', () => {
      const current = localStorage.getItem('site_lang') || 'uk';
      setLang(current === 'uk' ? 'en' : 'uk');
    });
    setLang(localStorage.getItem('site_lang') || 'uk');
  </script>
</body>
</html>
